<%= render "shared/navbar" %>

<!-- MAIN CONTENT -->
<div class="container mt-4">
  <p id="notice"><%= notice %></p>
  <div class="row">
    <div class="col-lg-12 m-2">
      <h1 class="font-weight-bold">All our airplanes</h1>
      <p>All our <%= @airplanes.count %> airplanes</p>
    </div>
  </div>
  <div class="row">
    <% @airplanes.each do |airplane| %>
        <div class="col-lg-4">
          <div class="card m-2 shadow" style="width: 20rem;">
            <% if airplane.photos.attached? %>
              <%= cl_image_tag airplane.photos.first.key, alt: "...", class:"card-img-top" %>
            <% else %>
              <img src="https://images.unsplash.com/photo-1474302770737-173ee21bab63?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1982&q=80" alt="" class="card-img-top">
            <% end %>
            <div class="card-body bg-light border-bottom">
              <h5 class="card-title font-weight-bold"><%= airplane.model %></h5>
              <!-- <p class="card-text"><#%= airplane.model %></p> TODO add location to airplane table GEOCODIN-->
              <h6>
                <i class="fas fa-user-friends"><%= airplane.capacity %></i>
                <i class="fas fa-euro-sign px-2"><%= airplane.price %></i>
                <i class="fas fa-star"><%= airplane.rating %></i>
              </h6>
            </div>
            <div class="bg-white p-3 d-flex">
              <% unless policy(airplane).update? %>
                <%= link_to "Fly me now", airplane_path(airplane.id), class:"btn btn-outline-primary" %>
              <% end %>
              <% if policy(airplane).update? %>
                  <%= link_to "Edit", edit_airplane_path(airplane.id), class:"btn btn-outline-warning" %>
                  <%= link_to "Remove",
                            airplane_path(airplane.id),
                            method: :delete,
                            class:"btn btn-outline-danger",
                            data: { confirm: "Are you sure?" } %>
              <% end %>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>
